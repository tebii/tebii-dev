---
import BaseLayout from "../layouts/BaseLayout.astro";
import PostCard from "../components/PostCard.astro";
import { getCollection } from "astro:content";

const writeups = (await getCollection("writeups"))
  .filter((p) => !p.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());

const latest = writeups.slice(0, 6);

---

<BaseLayout
  title="tebii.dev"
  canonicalPath="/"
  active="home"
  description="Cybersecurity writeups, HTB walkthroughs, and bug bounty research."
>
  <section class="hero">
    <h1>hello there</h1>
    <p>
    i do some security research,
    bug hunting and random stuff from
    time to time
    </p>
  </section>

  <section style="margin-top:14px">
    <h2 style="margin:0 0 10px;font-size:16px;color:var(--subtext1)">
      latest writeups
    </h2>

    {latest.length ? (
      <div class="grid">
        {latest.map((p) => <PostCard post={p} />)}
      </div>
    ) : (
      <div class="card">
        <h2 style="margin:0 0 6px;font-size:18px">no posts yet :(</h2>
      </div>
    )}
  </section>
</BaseLayout>
